#############################################
# Typstify Workspace Manifest
# Restored workspace and shared dependencies
#############################################

[workspace]
members = [
    "typstify-ssg",
]
resolver = "2"

[workspace.dependencies]
# Core
eyre = "0.6.12"
futures = "0.3.31"
tracing = "0.1.40"
tracing-subscriber = { version = "0.3.18", features = ["env-filter"] }
serde = { version = "1.0.219", features = ["derive"] }
serde_json = "1.0.141"
toml = "0.8.23"

# WebAssembly / JS interop
console_error_panic_hook = "0.1.7"
console_log = "1.0.0"
gloo-net = "0.6.0"
js-sys = "0.3.77"
wasm-bindgen = "0.2.100"
wasm-bindgen-futures = "0.4.50"
web-sys = "0.3.77"

# Leptos (CSR)
leptos = "0.8.6"
leptos_meta = "0.8.5"
leptos_router = "0.8.5"

# Typst toolchain
pulldown-cmark = "0.13.0"
thiserror = "1.0.69"
typst = "0.13.1"
typst-library = "0.13.1"
typst-syntax = "0.13.1"

[profile.release]
codegen-units = 1
lto = true
opt-level = "z"
panic = "abort"

[[workspace.metadata.leptos]]
# Project identifier
name = "typstify"
# Packages/crates
lib-package = "typstify-site"
bin-package = "typstify-site"
# Output naming
output-name = "typstify"
# Serve/build directories
site-root = "dist"
site-pkg-dir = "pkg"
assets-dir = "public"
# Dev server configuration
site-addr = "127.0.0.1:5173"
reload-port = 3002
# Features to use for lib and bin (CSR only)
lib-features = ["csr"]
bin-features = ["csr"]
# Extra watched folders
watch-additional-files = ["style/", "contents/"]
